---
import BaseLayout from "../../layouts/BaseLayout.astro";
---

<BaseLayout title="Admin | Správa" noindex={true}>
  <!-- HERO -->
  <section class="heroSection">
    <div class="heroContent">
      <h1>Správa FerkoMedia</h1>
      <p class="heroLead">Faktúry, workshopy, email marketing, sociálne siete</p>
    </div>
  </section>

  <!-- TABS -->
  <section class="section">
    <div class="adminTabs">
      <button class="adminTab active" data-tab="invoices">Faktúry</button>
      <button class="adminTab" data-tab="workshops">Workshopy</button>
      <button class="adminTab" data-tab="email">Email marketing</button>
      <button class="adminTab" data-tab="social">Sociálne siete</button>
    </div>

    <!-- ================= FAKTÚRY ================= -->
    <div class="tabContent active" id="tab-invoices">
      <div class="statsGrid">
        <div class="statCard">
          <span class="statValue" id="statTotal">-</span>
          <span class="statLabel">Faktúr celkom</span>
        </div>
        <div class="statCard">
          <span class="statValue" id="statRevenue">-</span>
          <span class="statLabel">Celkový príjem</span>
        </div>
        <div class="statCard">
          <span class="statValue" id="statMonthCount">-</span>
          <span class="statLabel">Tento mesiac</span>
        </div>
        <div class="statCard">
          <span class="statValue" id="statMonthRevenue">-</span>
          <span class="statLabel">Príjem tento mesiac</span>
        </div>
      </div>

      <div class="invoiceControls">
        <input
          type="text"
          id="searchInvoice"
          placeholder="Hľadať podľa mena, emailu, IČO…"
          class="searchInput"
        />
        <button class="btn btn--primary" id="loadInvoices">
          Načítať faktúry
        </button>
      </div>

      <div class="tableWrapper">
        <table class="invoiceTable">
          <thead>
            <tr>
              <th>Číslo</th>
              <th>Dátum</th>
              <th>Zákazník</th>
              <th>Firma / IČO</th>
              <th>Produkt</th>
              <th>Suma</th>
              <th>Stav</th>
            </tr>
          </thead>
          <tbody id="invoiceTableBody">
            <tr>
              <td colspan="7" class="emptyState">
                Klikni na „Načítať faktúry“
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ================= WORKSHOPY ================= -->
    <div class="tabContent" id="tab-workshops">
      <h2>Workshopy</h2>
      <div class="formCard">
        <p class="text-muted">
          Termíny workshopov sa spravujú cez JSON súbor.
        </p>
        <p class="help">
          <code>src/data/workshop-terms.json</code>
        </p>
      </div>
    </div>

    <!-- ================= EMAIL MARKETING ================= -->
    <div class="tabContent" id="tab-email">
      <h2>Email marketing</h2>

      <div class="formCard">
        <div class="statsGrid">
          <div class="statCard">
            <span class="statValue" id="emailContacts">-</span>
            <span class="statLabel">Kontaktov</span>
          </div>
          <div class="statCard">
            <span class="statValue" id="emailCampaigns">-</span>
            <span class="statLabel">Kampaní</span>
          </div>
        </div>

        <button class="btn btn--primary" style="margin-top:1.5rem">
          Načítať email dáta
        </button>
      </div>
    </div>

    <!-- ================= SOCIÁLNE SIETE ================= -->
    <div class="tabContent" id="tab-social">
      <h2>Sociálne siete</h2>

      <div class="formCard">
        <div class="formGrid">
          <div class="field">
            <label>Platforma</label>
            <select>
              <option>Instagram</option>
              <option>Facebook</option>
              <option>LinkedIn</option>
            </select>
          </div>

          <div class="field">
            <label>Dátum publikovania</label>
            <input type="date" />
          </div>

          <div class="field" style="grid-column:1/-1">
            <label>Text príspevku</label>
            <textarea rows="4"></textarea>
          </div>
        </div>

        <div class="formActions">
          <button class="btn btn--primary">Uložiť koncept</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ================= SCRIPT ================= -->
  <script>
    document.querySelectorAll(".adminTab").forEach(tab => {
      tab.addEventListener("click", () => {
        document
          .querySelectorAll(".adminTab")
          .forEach(t => t.classList.remove("active"));
        document
          .querySelectorAll(".tabContent")
          .forEach(c => c.classList.remove("active"));

        tab.classList.add("active");
        document
          .getElementById("tab-" + tab.dataset.tab)
          .classList.add("active");
      });
    });
  </script>

  <!-- ================= STYLES ================= -->
  <style>
    .heroSection {
      padding: 4rem 1.5rem 2rem;
      text-align: center;
      background: radial-gradient(
        ellipse at top,
        rgba(249,115,22,0.12) 0%,
        transparent 60%
      );
    }

    .heroLead {
      color: rgba(255,255,255,0.6);
    }

    .section {
      padding: 2rem 0 4rem;
    }

    .adminTabs {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      padding-bottom: 1rem;
      flex-wrap: wrap;
    }

    .adminTab {
      padding: 0.75rem 1.5rem;
      background: transparent;
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      color: rgba(255,255,255,0.7);
      cursor: pointer;
    }

    .adminTab.active {
      background: #f97316;
      border-color: #f97316;
      color: #fff;
    }

    .tabContent {
      display: none;
    }

    .tabContent.active {
      display: block;
    }
  </style>
</BaseLayout>
