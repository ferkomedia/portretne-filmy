---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Admin | Správa workshopov" noindex={true}>
  <section class="hero">
    <div class="eyebrow">Admin</div>
    <h1>Správa termínov workshopov</h1>
    <p class="lead">Generuj JSON záznamy a pridávaj ich do súboru.</p>
  </section>

  <section class="section">
    <h2>Pridať nový termín</h2>
    <div class="card">
      <form id="addTermForm">
        <div class="formGrid">
          <div class="field">
            <label for="title">Typ workshopu</label>
            <select id="title" required>
              <option value="">Vyber typ</option>
              <option value="Web za 1 deň">Web za 1 deň</option>
              <option value="E-shop za 1 deň">E-shop za 1 deň</option>
              <option value="Google reklama za 1 deň">Google reklama za 1 deň</option>
              <option value="Sociálne siete za 1 deň">Sociálne siete za 1 deň</option>
              <option value="AI nástroje za 1 deň">AI nástroje za 1 deň</option>
            </select>
          </div>

          <div class="field">
            <label for="date">Dátum</label>
            <input id="date" type="text" placeholder="DD.MM.RRRR" required />
          </div>

          <div class="field">
            <label for="city">Mesto</label>
            <input id="city" type="text" value="Martin" required />
          </div>

          <div class="field">
            <label for="price">Cena (€)</label>
            <input id="price" type="number" value="149" required />
          </div>

          <div class="field">
            <label for="capacity">Kapacita</label>
            <input id="capacity" type="number" value="12" required />
          </div>

          <div class="field">
            <label for="status">Status</label>
            <select id="status">
              <option value="open">Otvorený</option>
              <option value="closed">Zatvorený</option>
            </select>
          </div>
        </div>

        <div class="formActions">
          <button type="submit" class="btn btn--primary">Generovať JSON</button>
        </div>
      </form>

      <div id="jsonOutput" style="display:none; margin-top:1.5rem;">
        <h3>Nový JSON záznam:</h3>
        <pre id="jsonCode" style="background:rgba(0,0,0,0.3); padding:1rem; border-radius:8px; overflow-x:auto;"></pre>
        <p class="help">Skopíruj tento záznam a pridaj ho do súboru src/data/workshop-terms.json</p>
      </div>
    </div>
  </section>

  <section class="section">
    <h2>Ako upraviť termíny</h2>
    <div class="grid2">
      <div class="card">
        <h3>1. Otvor súbor</h3>
        <p>src/data/workshop-terms.json</p>
      </div>
      <div class="card">
        <h3>2. Uprav JSON</h3>
        <p>Pridaj, zmeň alebo odstráň termíny.</p>
      </div>
      <div class="card">
        <h3>3. Commit a Push</h3>
        <p>git add . && git commit -m "Update" && git push</p>
      </div>
      <div class="card">
        <h3>4. Hotovo</h3>
        <p>Cloudflare automaticky deployuje.</p>
      </div>
    </div>
  </section>

  <section class="section">
    <h2>Príklad JSON</h2>
    <div class="card">
      <pre style="background:rgba(0,0,0,0.3); padding:1rem; border-radius:8px;">[
  &#123;
    "title": "Web za 1 deň",
    "date": "25.01.2026",
    "city": "Martin",
    "price": 149,
    "capacity": 12,
    "status": "open"
  &#125;
]</pre>
    </div>
  </section>

  <script>
    document.getElementById('addTermForm').addEventListener('submit', function(e) {
      e.preventDefault();
      var term = {
        title: document.getElementById('title').value,
        date: document.getElementById('date').value,
        city: document.getElementById('city').value,
        price: parseInt(document.getElementById('price').value),
        capacity: parseInt(document.getElementById('capacity').value),
        status: document.getElementById('status').value
      };
      document.getElementById('jsonCode').textContent = JSON.stringify(term, null, 2);
      document.getElementById('jsonOutput').style.display = 'block';
    });
  </script>
</BaseLayout>
