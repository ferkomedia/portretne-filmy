---
import BaseLayout from "../layouts/BaseLayout.astro";
import terms from "../data/workshop-terms.json";

const openTerms = (terms || []).filter(t => (t.status || "").toLowerCase() === "open");
const formatTerm = (t) => `${t.date} – ${t.title} (${t.city}) – ${t.price} €`;
---

<BaseLayout title="Workshopy | Web, E-shop, Google Ads, AI za 1 deň" description="Praktické jednodňové workshopy v Martine. Web, E-shop, Google reklama, Sociálne siete, AI nástroje. Odídeš s hotovým výsledkom.">
  <section class="hero">
    <div class="eyebrow">Workshopy</div>
    <h1>Workshopy za 1 deň, kde odchádzaš s výsledkom</h1>
    <p class="lead">
      Toto nie je prednáška. Pracuješ na vlastnom projekte, krok za krokom, s pomocou lektora.
      Na konci dňa máš nastavené základy a jasný ďalší postup.
    </p>

    <div class="actions">
      <a class="btn btn--primary" href="#terminy">Pozrieť termíny</a>
      <a class="btn btn--ghost" href="#rezervacia">Rezervovať miesto</a>
    </div>
  </section>

  <section class="section" id="typy">
    <h2>Aké workshopy robíme</h2>
    <div class="grid3">
      <div class="card">
        <h3>Web za 1 deň</h3>
        <p>Základ webu, štruktúra, texty, SEO minimum, publikovanie.</p>
        <div class="actions"><a class="btn btn--ghost" href="#rezervacia">Chcem miesto</a></div>
      </div>
      <div class="card">
        <h3>E-shop za 1 deň</h3>
        <p>Produkt, platby/doprava, základné nastavenia a prvá objednávka.</p>
        <div class="actions"><a class="btn btn--ghost" href="#rezervacia">Chcem miesto</a></div>
      </div>
      <div class="card">
        <h3>Google reklama za 1 deň</h3>
        <p>Účet, konverzie, kampane, kľúčové slová a prvé reklamy bez chaosu.</p>
        <div class="actions"><a class="btn btn--ghost" href="#rezervacia">Chcem miesto</a></div>
      </div>
      <div class="card">
        <h3>Sociálne siete za 1 deň</h3>
        <p>Obsahový plán, šablóny, natáčanie na mobil a konzistentný výstup.</p>
        <div class="actions"><a class="btn btn--ghost" href="#rezervacia">Chcem miesto</a></div>
      </div>
      <div class="card">
        <h3>AI nástroje za 1 deň</h3>
        <p>Praktické AI pre podnikanie: texty, nápady, automatizácie, procesy.</p>
        <div class="actions"><a class="btn btn--ghost" href="#rezervacia">Chcem miesto</a></div>
      </div>
      <div class="card">
        <h3>Na mieru</h3>
        <p>Ak chceš kombináciu (napr. web + reklama), napíš a vyskladáme deň.</p>
        <div class="actions"><a class="btn btn--primary" href="/kontakt#objednat">Napísať dopyt</a></div>
      </div>
    </div>
  </section>

  <section class="section" id="co-ziskas">
    <h2>Čo si z workshopu odnesieš</h2>
    <div class="grid3">
      <div class="card">
        <h3>Hotové nastavenie</h3>
        <p>Nie "teóriu do šuflíka", ale reálne kroky spravené priamo na tvojom projekte.</p>
      </div>
      <div class="card">
        <h3>Checklist + šablóny</h3>
        <p>Kontrolný zoznam, odporúčané postupy a šablóny textov podľa typu workshopu.</p>
      </div>
      <div class="card">
        <h3>Jasný ďalší plán</h3>
        <p>Po dni vieš presne, čo je ďalší krok a čo už neriešiť "naslepo".</p>
      </div>
    </div>

    <div class="actions">
      <a class="btn btn--primary" href="#rezervacia">Rezervovať miesto</a>
      <a class="btn btn--ghost" href="/kontakt#objednat">Mám otázku</a>
    </div>
  </section>

  <section class="section" id="terminy">
    <h2>Aktuálne termíny</h2>

    {openTerms.length === 0 ? (
      <div class="card">
        <p>Termíny doplníme čoskoro. Napíš a dáme ti vedieť prvý voľný termín.</p>
        <div class="actions">
          <a class="btn btn--primary" href="/kontakt#objednat">Napísať správu</a>
        </div>
      </div>
    ) : (
      <div class="grid2">
        {openTerms.map(t => (
          <div class="card">
            <h3>{t.title}</h3>
            <p><strong>{t.date}</strong> • {t.city} • {t.price} € • kapacita {t.capacity}</p>
            <div class="actions">
              <a class="btn btn--primary" href="#rezervacia">Rezervovať</a>
              <a class="btn btn--ghost" href="/kontakt#objednat">Spýtať sa</a>
            </div>
          </div>
        ))}
      </div>
    )}
  </section>

  <section class="section" id="miesto">
    <h2>Miesto a forma</h2>
    <div class="grid2">
      <div class="card">
        <h3>Kde to prebieha</h3>
        <p>Martin a okolie (presnú adresu posielame po rezervácii). Pracuje sa na vlastnom notebooku.</p>
      </div>
      <div class="card">
        <h3>Kapacita</h3>
        <p>Malá skupina (typicky do 12 ľudí), aby každý dostal pomoc a stihol spraviť výsledok.</p>
      </div>
    </div>
  </section>

  <section class="section" id="faq">
    <h2>FAQ</h2>
    <div class="grid2">
      <div class="card">
        <h3>Je to pre začiatočníkov?</h3>
        <p>Áno. Dôležité je mať cieľ (čo chceš spraviť) a prísť s notebookom.</p>
      </div>
      <div class="card">
        <h3>Čo ak nestihnem všetko?</h3>
        <p>Dostaneš checklist a odporúčania. Podľa dohody vieme dať krátky follow-up.</p>
      </div>
      <div class="card">
        <h3>Je v cene aj konzultácia?</h3>
        <p>Po rezervácii sa ozveme s detailmi a krátkym upresnením, aby deň prebehol hladko.</p>
      </div>
      <div class="card">
        <h3>Faktúra?</h3>
        <p>Áno. Pri rezervácii stačí uviesť údaje (alebo IČO v správe v poznámke).</p>
      </div>
    </div>

    <div class="actions">
      <a class="btn btn--primary" href="#rezervacia">Chcem sa prihlásiť</a>
      <a class="btn btn--ghost" href="/kontakt#objednat">Mám otázku</a>
    </div>
  </section>

  <section class="section" id="rezervacia">
    <h2>Rezervačný formulár</h2>

    <div class="formCard">
      <form
        name="workshopy"
        method="POST"
        action="/api/form-submit"
        data-domain-form
        data-ico-form
      >

        <input type="hidden" name="form-name" value="workshopy" />
        <!-- Hidden company fields (Netlify submission) -->
        <input type="hidden" name="Firma - názov" value="" />
        <input type="hidden" name="Firma - DIČ" value="" />
        <input type="hidden" name="Firma - IČ DPH" value="" />
        <input type="hidden" name="Firma - Ulica" value="" />
        <input type="hidden" name="Firma - Číslo" value="" />
        <input type="hidden" name="Firma - Mesto" value="" />
        <input type="hidden" name="Firma - PSČ" value="" />
        <input type="hidden" name="Firma - Krajina" value="" />
        <input type="hidden" name="Firma - Adresa (celá)" value="" />


        <div class="formGrid">
        <div class="field">
          <label for="wsIco">IČO (voliteľné)</label>
          <input id="wsIco" name="IČO" inputmode="numeric" placeholder="napr. 12345678" />
          <div class="help">Ak ste FO alebo firmu neuvádzate, nechajte prázdne.</div>
          <div class="statusLine" data-ico-status></div>
        </div>

          <div class="field">
            <label for="wsName">Meno a priezvisko</label>
            <input id="wsName" name="Meno a priezvisko" placeholder="Vaše meno" required />
          </div>

          <div class="field">
            <label for="wsEmail">E-mail</label>
            <input id="wsEmail" type="email" name="E-mail" placeholder="napr. meno@firma.sk" required />
          </div>

          <div class="field">
            <label for="wsPhone">Telefón</label>
            <input id="wsPhone" name="Telefón" placeholder="+421…" />
          </div>

          <div class="field">
            <label for="wsTerm">Termín workshopu</label>
            <select id="wsTerm" name="Termín workshopu" required>
              <option value="" selected disabled>Vyberte termín</option>
              {openTerms.map(t => <option value={formatTerm(t)}>{formatTerm(t)}</option>)}
            </select>
          </div>

          <div class="field">
            <label for="wsDomain">Doména (.sk) (voliteľné)</label>
            <input id="wsDomain" name="Doména (.sk)" placeholder="napr. mojadomena.sk" />
            <div class="statusLine" data-domain-status></div>
          </div>

          <div class="field" style="grid-column: 1 / -1;">
            <label for="wsNote">Poznámka (voliteľné)</label>
            <textarea id="wsNote" name="Poznámka" placeholder="Ak máte otázku alebo špeciálnu požiadavku, napíšte sem."></textarea>
          </div>
        </div>

        <!-- Auto-filled company fields (visible only when loaded) -->
        <div class="autoFields" data-auto-fields style="margin-top:14px;">
          <div class="grid2">
            <div class="field">
              <label for="wsCompanyName">Firma – názov</label>
              <input id="wsCompanyName" readonly />
            </div>
            <div class="field">
              <label for="wsCompanyAddressFull">Firma – adresa</label>
              <input id="wsCompanyAddressFull" readonly />
            </div>
            <div class="field">
              <label for="wsCompanyDic">DIČ</label>
              <input id="wsCompanyDic" readonly />
            </div>
            <div class="field">
              <label for="wsCompanyIcdph">IČ DPH</label>
              <input id="wsCompanyIcdph" readonly />
            </div>
            <div class="field">
              <label for="wsCompanyStreet">Ulica</label>
              <input id="wsCompanyStreet" readonly />
            </div>
            <div class="field">
              <label for="wsCompanyNumber">Číslo</label>
              <input id="wsCompanyNumber" readonly />
            </div>
            <div class="field">
              <label for="wsCompanyCity">Mesto</label>
              <input id="wsCompanyCity" readonly />
            </div>
            <div class="field">
              <label for="wsCompanyPsc">PSČ</label>
              <input id="wsCompanyPsc" readonly />
            </div>
            <div class="field" style="grid-column: 1 / -1;">
              <label for="wsCompanyCountry">Krajina</label>
              <input id="wsCompanyCountry" readonly />
            </div>
          </div>
        </div>

        <div class="formActions">
          <label class="checkRow">
            <input type="checkbox" name="GDPR súhlas" required />
            Súhlasím so spracovaním osobných údajov za účelom vybavenia rezervácie.
          </label>

          <button class="btn btn--primary" type="submit">Rezervovať miesto</button>
        </div>
      </form>
    </div>
  </section>

  <script type="module" src="/scripts/enrich-forms.js"></script>
</BaseLayout>
